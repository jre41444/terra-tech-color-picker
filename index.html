<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Terra-Tech Color Picker</title>

<script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .wrap {
    width: 300px;
    text-align: center;
  }

  #picker {
    margin: 0 auto 12px auto;
  }

  .hex-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 14px;
  }

  .swatch {
    width: 34px;
    height: 34px;
    border-radius: 6px;
    border: 2px solid #000;
  }

  input {
    font-size: 16px;
    padding: 6px 10px;
    width: 110px;
    text-align: center;
  }

  button {
    width: 100%;
    padding: 12px;
    font-size: 18px;
    font-weight: 700;
    background: linear-gradient(#ffd94d, #f5b400);
    border: 2px solid #6b4b00;
    border-radius: 10px;
    cursor: pointer;
  }

  button:active {
    transform: scale(0.98);
  }
</style>
</head>

<body>
<div class="wrap">
  <div id="picker"></div>

  <div class="hex-row">
    <div class="swatch" id="swatch"></div>
    <input id="hex" value="#FF8800" />
  </div>

  <button id="calc">CALCULATE</button>
</div>

<script>
  const hexInput = document.getElementById("hex");
  const swatch = document.getElementById("swatch");
  const button = document.getElementById("calc");

  const picker = new iro.ColorPicker("#picker", {
    width: 280,
    color: "#FF8800",
    layout: [
      { component: iro.ui.Box },
      { component: iro.ui.Slider, options: { sliderType: "hue" } }
    ]
  });

  function sync(hex) {
    hexInput.value = hex.toUpperCase();
    swatch.style.background = hex;
  }

  picker.on("color:change", c => sync(c.hexString));

  hexInput.addEventListener("change", () => {
    picker.color.hexString = hexInput.value;
  });

  button.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(hexInput.value);
      button.textContent = "SAVED ✓";
      setTimeout(() => button.textContent = "CALCULATE", 900);
    } catch {
      alert("Copy failed — please copy manually.");
    }
  });
</script>
</body>
</html>
